openapi: 3.0.1
info:
  title: TiDB Cloud API
  description: |
    # Overview

    The TiDB Cloud API is a [REST interface](https://en.wikipedia.org/wiki/Representational_state_transfer) that provides you with programmatic access to manage administrative objects within TiDB Cloud. Through this API, you can manage resources automatically and efficiently:

    * Projects
    * Clusters
    * Backups
    * Restores

    The API has the following features:

    - **JSON entities.** All entities are expressed in JSON.
    - **HTTPS-only.** You can only access the API via HTTPS, ensuring all the data sent over the network is encrypted with TLS.
    - **Key-based access and digest authentication.** Before you access TiDB Cloud API, you must generate an API key. All requests are authenticated through [HTTP Digest Authentication](https://en.wikipedia.org/wiki/Digest_access_authentication), ensuring the API key is never sent over the network.

    # Get Started

    This guide helps you make your first API call to TiDB Cloud API. You'll learn how to authenticate a request, build a request, and interpret the response. The [List all accessible projects](#tag/Project/operation/ListProjects) endpoint is used in this guide as an example.

    ## Prerequisites

    To complete this guide, you need to perform the following tasks:

    - Create a [TiDB Cloud account](https://tidbcloud.com/free-trial)
    - Install [curl](https://curl.se/)

    ## Step 1. Create an API key

    To create an AKI key, log in to your TiDB Cloud console. Navigate to the **Organization Settings** page, and create an API key.

    An API key contains a public key and a private key. Copy and save them in a secure location. You will need to use the API key later in this guide.

    For more details about creating API key, refer to [API Key Management](#section/Authentication/API-Key-Management).

    ## Step 2. Make your first API call

    ### Build an API call

    TiDB Cloud API call have the following components:

    - **A host.** The host for TiDB Cloud API is <https://api.tidbcloud.com>.
    - **An API Key**. The public key and the private key are required for authentication.
    - **A request.** When submitting data to a resource via POST or PUT, you must submit your payload in JSON.

    In this guide, you call the [List all accessible projects](#tag/Project/operation/ListProjects) endpoint. For the detailed description of the endpoint, see the [API reference](#tag/Project/operation/ListProjects).

    ### Call an API endpoint

    To get all projects in your organization, run the following command in your terminal. Remember to change `YOUR_PUBLIC_KEY` to your public key and `YOUR_PRIVATE_KEY` to your private key.

    ```shell
    curl --digest \
      --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
      --request GET \
      --url https://api.tidbcloud.com/api/v1/projects
    ```

    ## Step 3. Check the response

    After making the API call, if the status code in response is `200` and you see details about all the projects in your organization, your request is successful. Here is an example of a successful response.

    ```log
    {
      "items": [
        {
          "id": "{project_id}",
          "org_id": "{org_id}",
          "name": "MyProject",
          "cluster_count": 3,
          "user_count": 1,
          "create_timestamp": "1652407748"
        }
      ],
      "total": 1
    }
    ```

    If your API call is not successful, you will receive a status code other than `200` and the response looks similar to the following example. To troubleshoot the failed call, you can check the `message` in the response.

    ```log
    {
      "code": 49900001,
      "message": "public_key not found",
      "details": []
    }
    ```

    # Authentication

    The TiDB Cloud API uses [HTTP Digest Authentication](https://en.wikipedia.org/wiki/Digest_access_authentication). It protects your private key from being sent over the network. For more details about HTTP Digest Authentication, refer to the [IETF RFC](https://datatracker.ietf.org/doc/html/rfc7616).

    ## API Key Overview

    - The API key contains a public key and a private key, which act as the username and password required in the HTTP Digest Authentication. The private key only displays upon the key creation.
    - The API key belongs to your organization and acts as the `Owner` role. You can check [permissions of owner](https://docs.pingcap.com/tidbcloud/manage-user-access#configure-member-roles).
    - You must provide the correct API key in every request. Otherwise, the TiDB Cloud responds with a `401` error.

    ## API Key Management

    ### Create an API Key

    Only the **owner** of an organization can create an API key.

    To create an API key in an organization, perform the following steps:

    1. Click the account name in the upper-right corner of the TiDB Cloud console.
    2. Click **Organization Settings**. The organization settings page is displayed.
    3. Click the **API Keys** tab and then click **Create API Key**.
    4. Enter a description for your API key. The role of the API key is always `Owner` currently.
    5. Click **Next**. Copy and save the public key and the private key.
    6. Make sure that you have copied and saved the private key in a secure location. The private key only displays upon the creation. After leaving this page, you will not be able to get the full private key again.
    7. Click **Done**.

    ### View Details of an API Key

    To view details of an API key, perform the following steps:

    1. Click the account name in the upper-right corner of the TiDB Cloud console.
    2. Click **Organization Settings**. The organization settings page is displayed.
    3. Click the **API Keys** tab.
    4. You can view the details of the API keys in the menu.

    ### Edit an API Key

    Only the **owner** of an organization can modify an API key.

    To edit an API key in an organization, perform the following steps:

    1. Click the account name in the upper-right corner of the TiDB Cloud console.
    2. Click **Organization Settings**. The organization settings page is displayed.
    3. Click the **API Keys** tab.
    4. Click **Edit** in the API key row that you want to change.
    4. You can update the API key description.
    5. Click **Done**.

    ### Delete an API key

    Only the **owner** of an organization can delete an API key.

    To delete an API key in an organization, perform the following steps:

    1. Click the account name in the upper-right corner of the TiDB Cloud console.
    2. Click **Organization Settings**. The organization settings page is displayed.
    3. Click the **API Keys** tab.
    4. Click **Delete** in the API key row that you want to delete.
    5. Click **I understand the consequences, delete this API Key.**

    # Rate Limiting


    The TiDB Cloud API allows up to 100 requests per minute per API key. If you exceed the rate limit, the API returns a `429` error.

    Each API request returns the following headers about the limit.

    - `X-Ratelimit-Limit-Minute`: The number of requests allowed per minute. It is 100 currently.
    - `X-Ratelimit-Remaining-Minute`: The number of remaining requests in the current minute. When it reaches `0`, the API returns a `429` error and indicates that you exceed the rate limit.
    - `X-Ratelimit-Reset`: The time in seconds at which the current rate limit resets.

    If you exceed the rate limit, an error response returns like this.

    ```
    $ curl -i https://api.tidbcloud.com/api/v1/projects --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' --digest

    > HTTP/2 429
    > date: Fri, 22 Jul 2022 05:28:37 GMT
    > content-type: application/json
    > content-length: 66
    > x-ratelimit-reset: 23
    > x-ratelimit-remaining-minute: 0
    > x-ratelimit-limit-minute: 100
    > x-kong-response-latency: 2
    > server: kong/2.8.1

    > {"details":[],"code":49900007,"message":"API rate limit exceeded"}
    ```
  version: "1.0"
  x-logo:
    url: https://download.pingcap.org/tidbcloud-logo-for-api-docs.png
    altText: TiDB Cloud Logo
    href: https://docs.pingcap.com/tidbcloud/
externalDocs:
  description: TiDB Cloud documentation
  url: https://docs.pingcap.com/tidbcloud/
servers:
- url: https://api.tidbcloud.com/
tags:
- name: Project
  description: List projects.
- name: Cluster
  description: Create, get, modify, and delete TiDB clusters.
- name: Backup
- name: Restore
paths:
  /api/v1/projects:
    get:
      tags:
      - Project
      summary: List all accessible projects.
      operationId: ListProjects
      parameters:
      - name: page
        in: query
        description: The number of pages.
        schema:
          type: integer
          format: int64
          default: 1
      - name: page_size
        in: query
        description: The size of a page
        schema:
          type: integer
          format: int64
          default: 10
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: GetProjectsResp
                required:
                - items
                - total
                type: object
                properties:
                  items:
                    type: array
                    description: The items of accessible projects.
                    items:
                      title: ListProjectItem
                      type: object
                      properties:
                        id:
                          type: string
                          description: The ID of the project.
                          format: uint64
                          example: "1"
                        org_id:
                          type: string
                          description: The ID of the TiDB Cloud organization to which
                            the project belongs.
                          format: uint64
                          example: "1"
                        name:
                          type: string
                          description: The name of the project.
                          example: default_project
                        cluster_count:
                          type: integer
                          description: The number of TiDB Cloud clusters deployed
                            in the project.
                          format: int64
                          example: 4
                        user_count:
                          type: integer
                          description: The number of users in the project.
                          format: int64
                          example: 10
                        create_timestamp:
                          type: string
                          description: The creation time of the cluster in Unix timestamp
                            seconds (epoch time).
                          format: timestamp
                          example: "1656991448"
                      description: ListProjectItem is the item of projects.
                  total:
                    type: integer
                    description: The total number of accessible projects.
                    format: int64
                    example: 1
                description: GetProjectsResp is the response for getting accessible
                  projects.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url 'https://api.tidbcloud.com/api/v1/projects?page=1&page_size=10'
  /api/v1/tidb/clusters:
    post:
      tags:
      - Cluster
      summary: Create a cluster.
      description: Before creating a Dedicated Tier cluster, you must [set a Project
        CIDR](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections#prerequisite-set-a-project-cidr)
        on [TiDB Cloud console](https://tidbcloud.com/).
      operationId: CreateCluster
      requestBody:
        content:
          application/json:
            schema:
              title: CreateClusterReq
              required:
              - cloud_provider
              - config
              - name
              - project_id
              - region
              type: object
              properties:
                project_id:
                  type: string
                  description: The ID of the project. You can get the project ID from
                    the response of [List all accessible projects](#tag/Cluster/operation/ListProjects).
                  format: uuid
                name:
                  pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
                  type: string
                  description: The name of the cluster. The name must be 4-64 characters
                    that can only include numbers, letters, and hyphens, and the first
                    and last character must be a letter or number.
                  example: Cluster0
                root_password:
                  type: string
                  description: The root password to access the cluster. This field
                    is optional, if set, it must be 8-64 characters.
                  example: password_example
                port:
                  maximum: 65535
                  minimum: 1024
                  type: integer
                  description: |-
                    The TiDB port for connection. The port must be in the range of 1024-65535 except 10080.

                    **Limitations**:
                    - For a shared cluster (Developer Tier), only port `4000` is available.
                  format: int32
                  example: 4000
                  default: 4000
                cluster_type:
                  type: string
                  description: |-
                    The cluster type.
                    - `"SHARED"`: create a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                    - `"DEDICATED"`: create a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster. Before creating a Dedicated Tier cluster, you must [set a Project CIDR](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections#prerequisite-set-a-project-cidr) on [TiDB Cloud console](https://tidbcloud.com/).
                  format: enum
                  example: SHARED
                  default: DEDICATED
                  enum:
                  - DEDICATED
                  - SHARED
                cloud_provider:
                  type: string
                  description: |-
                    The cloud provider on which your TiDB cluster is hosted.
                    - `"AWS"`: the Amazon Web Services cloud provider
                    - `"GCP"`: the Google Cloud Platform cloud provider
                  format: string
                  example: AWS
                  enum:
                  - AWS
                  - GCP
                region:
                  type: string
                  description: |
                    The region value should match the cloud provider's region code. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
                    | Cloud provider | Region name              | Region          |
                    |----------------|--------------------------|-----------------|
                    | AWS            | US East (N. Virginia)    | us-east-1       |
                    | AWS            | US West (Oregon)         | us-west-2       |
                    | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
                    | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
                    | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
                    | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
                    | AWS            | Europe (Frankfurt)       | eu-central-1    |
                    | GCP            | Iowa                     | us-central1     |
                    | GCP            | Oregon                   | us-west1        |
                    | GCP            | Tokyo                    | asia-northeast1 |
                    | GCP            | Singapore                | asia-southeast1 |
                    | GCP            | Taiwan                   | asia-east1      |
                  example: us-west-2
                config:
                  type: array
                  description: The configuration of the cluster.
                  example:
                  - node_type: TIDB
                    node_size: Shared0
                    node_quantity: 1
                  - node_type: TIKV
                    node_size: Shared0
                    storage_size_gib: 1
                    node_quantity: 1
                  - node_type: TIFLASH
                    node_size: Shared0
                    storage_size_gib: 1
                    node_quantity: 1
                  items:
                    required:
                    - node_quantity
                    - node_size
                    - node_type
                    - storage_size_gib
                    type: object
                    properties:
                      node_type:
                        type: string
                        description: |-
                          The type of a node in the cluster.

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
                          - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
                        example: TIKV
                        enum:
                        - TIDB
                        - TIKV
                        - TIFLASH
                      node_size:
                        type: string
                        description: |-
                          The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

                          **Limitations**:
                          - Can not modify `node_size` of an existing cluster.
                        example: 8C64G
                      storage_size_gib:
                        type: integer
                        description: |-
                          The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
                          - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

                          **Limitations**:
                          - Can not modify `storage_size_gib` of an existing cluster.
                        format: int32
                        example: 1024
                      node_quantity:
                        type: integer
                        description: |-
                          The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

                          **Limitations**:
                          - TiKV and TiFlash do not support decreasing node quantity.
                          - The `node_quantity` of TiKV must be a multiple of 3.
                        format: int32
                        example: 3
              description: CreateClusterReq is the request for creating cluster.
        required: true
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: CreateClusterResp
                required:
                - id
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the cluster.
                    format: uuid
                description: CreateClusterResp is the response for creating cluster.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request POST \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters \
            --header 'content-type: application/json' \
            --data '{"project_id":"1","name":"Cluster0","root_password":"password_example","port":4000,"cluster_type":"SHARED","cloud_provider":"AWS","region":"us-west-2","config":[{"node_type":"TIDB","node_size":"Shared0","node_quantity":1},{"node_type":"TIKV","node_size":"Shared0","storage_size_gib":1,"node_quantity":1},{"node_type":"TIFLASH","node_size":"Shared0","storage_size_gib":1,"node_quantity":1}]}'
      x-codegen-request-body-name: body
  /api/v1/tidb/clusters/provider/regions:
    get:
      tags:
      - Cluster
      summary: List the cloud providers, regions and available specifications.
      operationId: ListProviderRegions
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: GetProviderRegionsResp
                type: object
                properties:
                  items:
                    type: array
                    description: Items of provider regions.
                    example:
                    - cluster_type: DEDICATED
                      node_type: TIDB
                      node_size: 8C16G
                      node_quantity:
                        min: 1
                        step: 1
                      storage_size_gib:
                        min: 0
                        max: 0
                      available_regions:
                      - cloud_provider: AWS
                        name: us-west-2
                    - cluster_type: DEDICATED
                      node_type: TIKV
                      node_size: 8C64G
                      node_quantity:
                        min: 3
                        step: 3
                      storage_size_gib:
                        min: 500
                        max: 4096
                      available_regions:
                      - cloud_provider: AWS
                        name: us-west-2
                    - cluster_type: SHARED
                      node_type: TIDB
                      node_size: Shared0
                      node_quantity:
                        min: 1
                        step: 1
                      storage_size_gib:
                        min: 0
                        max: 0
                      available_regions:
                      - cloud_provider: AWS
                        name: us-west-2
                    - cluster_type: SHARED
                      node_type: TIKV
                      node_size: Shared0
                      node_quantity:
                        min: 1
                        step: 1
                      storage_size_gib:
                        min: 1
                        max: 1
                      available_regions:
                      - cloud_provider: AWS
                        name: us-west-2
                    - cluster_type: SHARED
                      node_type: TIFLASH
                      node_size: Shared0
                      node_quantity:
                        min: 1
                        step: 1
                      storage_size_gib:
                        min: 1
                        max: 1
                      available_regions:
                      - cloud_provider: AWS
                        name: us-west-2
                    items:
                      title: ListProviderRegionsItem
                      type: object
                      properties:
                        cluster_type:
                          type: string
                          description: |-
                            The cluster type.
                            - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                            - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster
                          format: enum
                          example: DEDICATED
                          enum:
                          - DEDICATED
                          - SHARED
                        node_type:
                          type: string
                          description: The type of a node in the cluster.
                          example: TIDB
                          enum:
                          - TIDB
                          - TIKV
                          - TIFLASH
                        node_size:
                          type: string
                          description: The size of the `node_type` in the cluster.
                          example: 8C64G
                        node_quantity:
                          type: object
                          properties:
                            min:
                              type: integer
                              description: The minimum node quantity of the `node_type`
                                in the cluster.
                              format: int32
                            step:
                              type: integer
                              description: The step of node quantity of the `node_type`
                                in the cluster.
                              format: int32
                          description: The range and step of node quantity of the
                            `node_type` in the cluster.
                        storage_size_gib:
                          type: object
                          properties:
                            min:
                              type: integer
                              description: The minimum storage size for each node
                                of the `node_type` in the cluster.
                              format: int32
                            max:
                              type: integer
                              description: The maximum storage size for each node
                                of the `node_type` in the cluster.
                              format: int32
                          description: The storage size range for each node of the
                            `node_type` in the cluster.
                        available_regions:
                          type: array
                          description: Available regions and providers.
                          items:
                            type: object
                            properties:
                              cloud_provider:
                                type: string
                                description: |-
                                  The cloud provider on which your TiDB cluster is hosted.
                                  - `"AWS"`: the Amazon Web Services cloud provider
                                  - `"GCP"`: the Google Cloud Platform cloud provider
                                format: string
                                example: AWS
                                enum:
                                - AWS
                                - GCP
                              name:
                                type: string
                                description: |
                                  The name of the region. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
                                  | Cloud provider | Region name              | Region          |
                                  |----------------|--------------------------|-----------------|
                                  | AWS            | US East (N. Virginia)    | us-east-1       |
                                  | AWS            | US West (Oregon)         | us-west-2       |
                                  | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
                                  | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
                                  | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
                                  | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
                                  | AWS            | Europe (Frankfurt)       | eu-central-1    |
                                  | GCP            | Iowa                     | us-central1     |
                                  | GCP            | Oregon                   | us-west1        |
                                  | GCP            | Tokyo                    | asia-northeast1 |
                                  | GCP            | Singapore                | asia-southeast1 |
                                  | GCP            | Taiwan                   | asia-east1      |
                                example: us-west-2
                      description: ListProviderRegionsItem is the item of provider
                        regions.
                description: GetProviderRegionsResp is the response for getting provider
                  regions.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/provider/regions
  /api/v1/tidb/clusters/{cluster_id}/backups:
    get:
      tags:
      - Backup
      summary: List all backups for a cluster.
      operationId: ListBackUpOfCluster
      parameters:
      - name: cluster_id
        in: path
        description: The ID of your cluster. You can get the cluster ID from the response
          of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
        required: true
        schema:
          type: string
          format: uint64
      - name: page
        in: query
        description: The number of pages.
        schema:
          type: integer
          format: int32
          default: 1
      - name: page_size
        in: query
        description: The size of a page.
        schema:
          type: integer
          format: int32
          default: 10
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: ListBackupOfClusterResp
                type: object
                properties:
                  items:
                    type: array
                    description: The items of all backups.
                    items:
                      title: ListBackupItem
                      type: object
                      properties:
                        id:
                          type: string
                          description: The ID of the backup. It is generated by TiDB
                            Cloud.
                          format: uint64
                          example: "1"
                        name:
                          type: string
                          description: The name of the backup.
                          example: backup-1
                        description:
                          type: string
                          description: The description of the backup. It is specified
                            by the user when taking a manual type backup. It helps
                            you add additional information to the backup.
                          example: backup for cluster upgrade in 2022/06/07
                        type:
                          type: string
                          description: The type of backup. TiDB Cloud only supports
                            manual and auto backup. For more information, see [TiDB
                            Cloud Documentation](https://docs.pingcap.com/tidbcloud/backup-and-restore#backup).
                          example: MANUAL
                          enum:
                          - MANUAL
                          - AUTO
                        create_timestamp:
                          type: string
                          description: The creation time of the backup in UTC. The
                            time format follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601)
                            standard, which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS`
                            (hour-minutes-seconds) + Z. For example, `2020-01-01T00:00:00Z`.
                          format: date-time
                          example: 2020-01-01T00:00:00Z
                        size:
                          type: string
                          description: The bytes of the backup.
                          format: uint64
                          example: "102400"
                        status:
                          type: string
                          description: The status of backup.
                          example: SUCCESS
                          enum:
                          - PENDING
                          - RUNNING
                          - FAILED
                          - SUCCESS
                      description: The item of backup list.
                  total:
                    type: integer
                    description: The total number of backups.
                    format: int64
                    example: 10
                description: The response for listing backups of a cluster.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url 'https://api.tidbcloud.com/api/v1/tidb/clusters/{cluster_id}/backups?page=1&page_size=10'
    post:
      tags:
      - Backup
      summary: Create a backup for a cluster.
      description: |-
        - For Dedicated Tier clusters, you can create as many manual backups as you need.
        - For Shared Tier clusters, you can create only two manual backups at most.
      operationId: CreateBackup
      parameters:
      - name: cluster_id
        in: path
        description: The ID of your cluster that you want to take a manual backup.
          You can get the cluster ID from the response of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
        required: true
        schema:
          type: string
          format: uint64
      requestBody:
        content:
          application/json:
            schema:
              title: CreateBackupReq
              required:
              - name
              type: object
              properties:
                name:
                  type: string
                  description: Specify the name for a manual backup. It is recommended
                    that you use a unique name, so that it is easy to distinguish
                    the backup when you query the backups.
                  example: backup-1
                description:
                  type: string
                  description: The description of the backup. It helps you add additional
                    information to the backup. Allows up to 256 characters.
                  example: backup-1
              description: This request for creating a MANUAL type backup.
        required: true
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: CreateBackupResp
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the backup.
                    format: uint64
                    example: "1"
                description: This response for creating a MANUAL type backup.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request POST \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{cluster_id}/backups \
            --header 'content-type: application/json' \
            --data '{"name":"backup-1","description":"backup-1"}'
      x-codegen-request-body-name: body
  /api/v1/tidb/clusters/{cluster_id}/backups/{backup_id}:
    get:
      tags:
      - Backup
      summary: Get a backup for a cluster.
      operationId: GetBackupOfCluster
      parameters:
      - name: cluster_id
        in: path
        description: The ID of your cluster. You can get the cluster ID from the response
          of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
        required: true
        schema:
          type: string
          format: uint64
      - name: backup_id
        in: path
        description: The ID of the backup.
        required: true
        schema:
          type: string
          format: uint64
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: GetBackupOfClusterResp
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the backup.
                    format: uint64
                    example: "1"
                  name:
                    type: string
                    description: The name of the backup.
                    example: backup-1
                  description:
                    type: string
                    description: The description of the backup. It is specified by
                      the user when taking a manual type backup. It helps you add
                      additional information to the backup.
                    example: backup for cluster upgrade in 2022/06/07
                  type:
                    type: string
                    description: The type of backup. TiDB Cloud only supports manual
                      and auto backup. For more information, see [TiDB Cloud Documentation](https://docs.pingcap.com/tidbcloud/backup-and-restore#backup).
                    example: MANUAL
                    enum:
                    - MANUAL
                    - AUTO
                  create_timestamp:
                    type: string
                    description: The creation time of the backup in UTC. The time
                      format follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601)
                      standard, which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS`
                      (hour-minutes-seconds) + Z. For example, `2020-01-01T00:00:00Z`.
                    format: date-time
                    example: 2020-01-01T00:00:00Z
                  size:
                    type: string
                    description: The bytes of the backup.
                    format: uint64
                    example: "102400"
                  status:
                    type: string
                    description: The status of backup.
                    example: SUCCESS
                    enum:
                    - PENDING
                    - RUNNING
                    - FAILED
                    - SUCCESS
                description: This response for getting backup of a cluster.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{cluster_id}/backups/{backup_id}
    delete:
      tags:
      - Backup
      summary: Delete a backup for a cluster.
      operationId: DeleteBackup
      parameters:
      - name: cluster_id
        in: path
        description: The ID of your cluster. You can get the cluster ID from the response
          of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
        required: true
        schema:
          type: string
          format: uint64
      - name: backup_id
        in: path
        description: The ID of the backup. You can get the backup ID from the response
          of [List all backups for a cluster](#tag/Project/operation/ListBackUpOfCluster).
        required: true
        schema:
          type: string
          format: uint64
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                type: object
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request DELETE \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{cluster_id}/backups/{backup_id}
  /api/v1/tidb/clusters/{id}:
    get:
      tags:
      - Cluster
      summary: Get a cluster by ID.
      operationId: GetCluster
      parameters:
      - name: id
        in: path
        description: The ID of the cluster.
        required: true
        schema:
          type: string
          format: uint64
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: ClusterItem
                required:
                - id
                - project_id
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the cluster.
                    format: uuid
                  project_id:
                    type: string
                    description: The ID of the project.
                    format: uuid
                  name:
                    pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
                    type: string
                    description: The name of the cluster.
                    example: Cluster0
                  port:
                    type: integer
                    description: The TiDB port for connection.
                    format: int32
                    example: 4000
                  tidb_version:
                    type: string
                    description: TiDB version.
                    example: v6.1.0
                  cluster_type:
                    type: string
                    description: |-
                      The cluster type:
                      - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                      - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster.
                    format: enum
                    example: DEDICATED
                    enum:
                    - DEDICATED
                    - SHARED
                  cloud_provider:
                    type: string
                    description: |-
                      The cloud provider on which your TiDB cluster is hosted.
                      - `"AWS"`: the Amazon Web Services cloud provider
                      - `"GCP"`: the Google Cloud Platform cloud provider
                    format: string
                    example: AWS
                    enum:
                    - AWS
                    - GCP
                  region:
                    type: string
                    description: Region of the cluster.
                    example: us-west-2
                  status:
                    type: string
                    description: Status of the cluster.
                    format: enum
                    example: AVAILABLE
                    enum:
                    - AVAILABLE
                    - CREATING
                    - MODIFYING
                  create_timestamp:
                    type: string
                    description: The creation time of the cluster in Unix timestamp
                      seconds (epoch time).
                    format: timestamp
                    example: "1656991448"
                  config:
                    type: array
                    description: The configuration of the cluster.
                    example:
                    - node_type: TIDB
                      node_size: 8C16G
                      vcpu_num: 8
                      ram_bytes: "17179869184"
                      storage_size_gib: 0
                      node_quantity: 1
                    - node_type: TIKV
                      node_size: 8C64G
                      vcpu_num: 8
                      ram_bytes: "68719476736"
                      storage_size_gib: 1024
                      node_quantity: 3
                    items:
                      type: object
                      properties:
                        node_type:
                          type: string
                          description: The type of a node in the cluster.
                          example: TIKV
                          enum:
                          - TIDB
                          - TIKV
                          - TIFLASH
                        node_size:
                          type: string
                          description: The size of the `node_type` in the cluster.
                          example: 8C64G
                        vcpu_num:
                          type: integer
                          description: The total vCPUs of a node in the cluster. If
                            the `cluster_type` is `"SHARED"`, `vcpu_num` is always
                            0.
                          format: int32
                          example: 8
                        ram_bytes:
                          type: string
                          description: The RAM size of a node in the cluster. If the
                            `cluster_type` is `"SHARED"`, `ram_bytes` is always 0.
                          format: int64
                          example: "68719476736"
                        storage_size_gib:
                          type: integer
                          description: The storage size of a node in the cluster.
                          format: int32
                          example: 1024
                        node_quantity:
                          type: integer
                          description: The number of nodes in the cluster.
                          format: int32
                          example: 3
                  node_map:
                    type: array
                    description: Node map. The `node_map` is not returned when the
                      `status` is `"CREATING"`.
                    example:
                    - node_name: tidb-0
                      node_type: TIDB
                      availability_zone: us-west-2a
                      node_size: 8C16G
                      vcpu_num: 8
                      ram_bytes: "17179869184"
                      storage_size_gib: 0
                      status: AVAILABLE
                    - node_name: tikv-0
                      node_type: TIKV
                      availability_zone: us-west-2a
                      node_size: 8C64G
                      vcpu_num: 8
                      ram_bytes: "68719476736"
                      storage_size_gib: 1024
                      status: AVAILABLE
                    - node_name: tikv-1
                      node_type: TIKV
                      availability_zone: us-west-2b
                      node_size: 8C64G
                      vcpu_num: 8
                      ram_bytes: "68719476736"
                      storage_size_gib: 1024
                      status: AVAILABLE
                    - node_name: tikv-2
                      node_type: TIKV
                      availability_zone: us-west-2c
                      node_size: 8C64G
                      vcpu_num: 8
                      ram_bytes: "68719476736"
                      storage_size_gib: 1024
                      status: AVAILABLE
                    items:
                      type: object
                      properties:
                        node_name:
                          type: string
                          description: The name of a node in the cluster.
                          example: tikv-1
                        node_type:
                          type: string
                          description: The type of a node in the cluster.
                          example: TIKV
                          enum:
                          - TIDB
                          - TIKV
                          - TIFLASH
                        availability_zone:
                          type: string
                          description: The availability zone of a node in the cluster.
                          example: us-west-2a
                        node_size:
                          type: string
                          description: The size of the `node_type` in the cluster.
                          example: 8C64G
                        vcpu_num:
                          type: integer
                          description: The total vCPUs of a node in the cluster. If
                            the `cluster_type` is `"SHARED"`, `vcpu_num` is always
                            0.
                          format: int32
                          example: 8
                        ram_bytes:
                          type: string
                          description: The RAM size of a node in the cluster. If the
                            `cluster_type` is `"SHARED"`, `ram_bytes` is always 0.
                          format: int64
                          example: "68719476736"
                        storage_size_gib:
                          type: integer
                          description: The storage size of a node in the cluster.
                          format: int32
                          example: 1024
                        status:
                          type: string
                          description: The status of a node in the cluster.
                          example: AVAILABLE
                          enum:
                          - AVAILABLE
                          - UNAVAILABLE
                          - CREATING
                          - DELETING
                  connection_strings:
                    type: object
                    properties:
                      standard:
                        type: string
                        description: |-
                          Standard connection string.

                          You must configure the [IP Access List](https://docs.pingcap.com/tidbcloud/connect-to-tidb-cluster#connect-via-standard-connection) for the cluster you created on [TiDB Cloud console](https://tidbcloud.com/) before connecting to this connection string.
                        example: tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                      vpc_peering:
                        type: string
                        description: |-
                          [VPC peering](https://docs.pingcap.com/tidbcloud/tidb-cloud-glossary#vpc-peering) connection string.

                          You must [Set up VPC peering connections](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections) for the project before connecting to this private connection string.
                        example: private-tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                    description: Connection strings.
                description: ClusterItem is the information of cluster.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{id}
    delete:
      tags:
      - Cluster
      summary: Delete a cluster.
      operationId: DeleteCluster
      parameters:
      - name: id
        in: path
        description: The ID of the cluster.
        required: true
        schema:
          type: string
          format: uint64
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                type: object
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request DELETE \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{id}
    patch:
      tags:
      - Cluster
      summary: Modify a Dedicated Tier cluster.
      operationId: UpdateCluster
      parameters:
      - name: id
        in: path
        description: The ID of the cluster.
        required: true
        schema:
          type: string
          format: uint64
      requestBody:
        content:
          application/json:
            schema:
              title: UpdateClusterReq
              required:
              - config
              type: object
              properties:
                config:
                  type: array
                  description: The configuration of the cluster.
                  example:
                  - node_type: TIKV
                    node_quantity: 6
                  items:
                    required:
                    - node_quantity
                    - node_type
                    type: object
                    properties:
                      node_type:
                        type: string
                        description: |-
                          The type of a node in the cluster.

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
                          - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
                        example: TIKV
                        enum:
                        - TIDB
                        - TIKV
                        - TIFLASH
                      node_size:
                        type: string
                        description: |-
                          The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          If you want to add TiFlash nodes to a cluster that does not have one before (increase the `node_quantity` of `"TIFLASH"` from 0), you must specify the `node_size` of TiFlash nodes. In other cases, you cannot modify the `node_size` of the node.

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

                          **Limitations**:
                          - Can not modify `node_size` of an existing cluster.
                      storage_size_gib:
                        type: integer
                        description: |-
                          The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          If you want to add TiFlash nodes to a cluster that does not have one before (increase the `node_quantity` of `"TIFLASH"` from 0), you must specify the `storage_size_gib` of TiFlash nodes. In other cases, you cannot modify the `storage_size_gib` of the node.

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
                          - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

                          **Limitations**:
                          - Can not modify `storage_size_gib` of an existing cluster.
                        format: int32
                      node_quantity:
                        type: integer
                        description: |-
                          The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

                          **Limitations**:
                          - TiKV and TiFlash do not support decreasing node quantity.
                          - The `node_quantity` of TiKV must be a multiple of 3.
                        format: int32
                        example: 6
              description: UpdateClusterReq is the request for updating cluster.
        required: true
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                type: object
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request PATCH \
            --url https://api.tidbcloud.com/api/v1/tidb/clusters/{id} \
            --header 'content-type: application/json' \
            --data '{"config":[{"node_type":"TIKV","node_quantity":6}]}'
      x-codegen-request-body-name: body
  /api/v1/tidb/projects/{project_id}/clusters:
    get:
      tags:
      - Cluster
      summary: List all clusters in a project.
      operationId: ListClustersOfProject
      parameters:
      - name: project_id
        in: path
        description: The ID of the project. You can get the project ID from the response
          of [List all accessible projects](#tag/Cluster/operation/ListProjects).
        required: true
        schema:
          type: string
          format: uint64
      - name: page
        in: query
        description: The number of pages.
        schema:
          type: integer
          format: int64
          default: 1
      - name: page_size
        in: query
        description: The size of a page.
        schema:
          type: integer
          format: int64
          default: 10
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: GetClustersOfProjectResp
                required:
                - items
                - total
                type: object
                properties:
                  items:
                    type: array
                    description: The items of clusters in the project.
                    items:
                      title: ClusterItem
                      required:
                      - id
                      - project_id
                      type: object
                      properties:
                        id:
                          type: string
                          description: The ID of the cluster.
                          format: uuid
                        project_id:
                          type: string
                          description: The ID of the project.
                          format: uuid
                        name:
                          pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
                          type: string
                          description: The name of the cluster.
                          example: Cluster0
                        port:
                          type: integer
                          description: The TiDB port for connection.
                          format: int32
                          example: 4000
                        tidb_version:
                          type: string
                          description: TiDB version.
                          example: v6.1.0
                        cluster_type:
                          type: string
                          description: |-
                            The cluster type:
                            - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                            - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster.
                          format: enum
                          example: DEDICATED
                          enum:
                          - DEDICATED
                          - SHARED
                        cloud_provider:
                          type: string
                          description: |-
                            The cloud provider on which your TiDB cluster is hosted.
                            - `"AWS"`: the Amazon Web Services cloud provider
                            - `"GCP"`: the Google Cloud Platform cloud provider
                          format: string
                          example: AWS
                          enum:
                          - AWS
                          - GCP
                        region:
                          type: string
                          description: Region of the cluster.
                          example: us-west-2
                        status:
                          type: string
                          description: Status of the cluster.
                          format: enum
                          example: AVAILABLE
                          enum:
                          - AVAILABLE
                          - CREATING
                          - MODIFYING
                        create_timestamp:
                          type: string
                          description: The creation time of the cluster in Unix timestamp
                            seconds (epoch time).
                          format: timestamp
                          example: "1656991448"
                        config:
                          type: array
                          description: The configuration of the cluster.
                          example:
                          - node_type: TIDB
                            node_size: 8C16G
                            vcpu_num: 8
                            ram_bytes: "17179869184"
                            storage_size_gib: 0
                            node_quantity: 1
                          - node_type: TIKV
                            node_size: 8C64G
                            vcpu_num: 8
                            ram_bytes: "68719476736"
                            storage_size_gib: 1024
                            node_quantity: 3
                          items:
                            type: object
                            properties:
                              node_type:
                                type: string
                                description: The type of a node in the cluster.
                                example: TIKV
                                enum:
                                - TIDB
                                - TIKV
                                - TIFLASH
                              node_size:
                                type: string
                                description: The size of the `node_type` in the cluster.
                                example: 8C64G
                              vcpu_num:
                                type: integer
                                description: The total vCPUs of a node in the cluster.
                                  If the `cluster_type` is `"SHARED"`, `vcpu_num`
                                  is always 0.
                                format: int32
                                example: 8
                              ram_bytes:
                                type: string
                                description: The RAM size of a node in the cluster.
                                  If the `cluster_type` is `"SHARED"`, `ram_bytes`
                                  is always 0.
                                format: int64
                                example: "68719476736"
                              storage_size_gib:
                                type: integer
                                description: The storage size of a node in the cluster.
                                format: int32
                                example: 1024
                              node_quantity:
                                type: integer
                                description: The number of nodes in the cluster.
                                format: int32
                                example: 3
                        node_map:
                          type: array
                          description: Node map. The `node_map` is not returned when
                            the `status` is `"CREATING"`.
                          example:
                          - node_name: tidb-0
                            node_type: TIDB
                            availability_zone: us-west-2a
                            node_size: 8C16G
                            vcpu_num: 8
                            ram_bytes: "17179869184"
                            storage_size_gib: 0
                            status: AVAILABLE
                          - node_name: tikv-0
                            node_type: TIKV
                            availability_zone: us-west-2a
                            node_size: 8C64G
                            vcpu_num: 8
                            ram_bytes: "68719476736"
                            storage_size_gib: 1024
                            status: AVAILABLE
                          - node_name: tikv-1
                            node_type: TIKV
                            availability_zone: us-west-2b
                            node_size: 8C64G
                            vcpu_num: 8
                            ram_bytes: "68719476736"
                            storage_size_gib: 1024
                            status: AVAILABLE
                          - node_name: tikv-2
                            node_type: TIKV
                            availability_zone: us-west-2c
                            node_size: 8C64G
                            vcpu_num: 8
                            ram_bytes: "68719476736"
                            storage_size_gib: 1024
                            status: AVAILABLE
                          items:
                            type: object
                            properties:
                              node_name:
                                type: string
                                description: The name of a node in the cluster.
                                example: tikv-1
                              node_type:
                                type: string
                                description: The type of a node in the cluster.
                                example: TIKV
                                enum:
                                - TIDB
                                - TIKV
                                - TIFLASH
                              availability_zone:
                                type: string
                                description: The availability zone of a node in the
                                  cluster.
                                example: us-west-2a
                              node_size:
                                type: string
                                description: The size of the `node_type` in the cluster.
                                example: 8C64G
                              vcpu_num:
                                type: integer
                                description: The total vCPUs of a node in the cluster.
                                  If the `cluster_type` is `"SHARED"`, `vcpu_num`
                                  is always 0.
                                format: int32
                                example: 8
                              ram_bytes:
                                type: string
                                description: The RAM size of a node in the cluster.
                                  If the `cluster_type` is `"SHARED"`, `ram_bytes`
                                  is always 0.
                                format: int64
                                example: "68719476736"
                              storage_size_gib:
                                type: integer
                                description: The storage size of a node in the cluster.
                                format: int32
                                example: 1024
                              status:
                                type: string
                                description: The status of a node in the cluster.
                                example: AVAILABLE
                                enum:
                                - AVAILABLE
                                - UNAVAILABLE
                                - CREATING
                                - DELETING
                        connection_strings:
                          type: object
                          properties:
                            standard:
                              type: string
                              description: |-
                                Standard connection string.

                                You must configure the [IP Access List](https://docs.pingcap.com/tidbcloud/connect-to-tidb-cluster#connect-via-standard-connection) for the cluster you created on [TiDB Cloud console](https://tidbcloud.com/) before connecting to this connection string.
                              example: tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                            vpc_peering:
                              type: string
                              description: |-
                                [VPC peering](https://docs.pingcap.com/tidbcloud/tidb-cloud-glossary#vpc-peering) connection string.

                                You must [Set up VPC peering connections](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections) for the project before connecting to this private connection string.
                              example: private-tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                          description: Connection strings.
                      description: ClusterItem is the information of cluster.
                  total:
                    type: integer
                    description: Total number of clusters in the project.
                    format: int64
                    example: 1
                description: GetClustersOfProjectResp is the response for getting
                  clusters of project.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url 'https://api.tidbcloud.com/api/v1/tidb/projects/{project_id}/clusters?page=1&page_size=10'
  /api/v1/tidb/projects/{project_id}/restores:
    get:
      tags:
      - Restore
      summary: List restore tasks in a project.
      operationId: ListRestoreTasks
      parameters:
      - name: project_id
        in: path
        description: The ID of your project. You can get the project ID from the response
          of [List all accessible projects.](#tag/Project/operation/ListProjects).
        required: true
        schema:
          type: string
          format: uint64
      - name: page
        in: query
        description: The number of pages.
        schema:
          type: integer
          format: int32
          default: 1
      - name: page_size
        in: query
        description: The size of a page.
        schema:
          type: integer
          format: int32
          default: 10
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: ListRestoreResp
                type: object
                properties:
                  items:
                    type: array
                    description: The items of restore list.
                    items:
                      title: ListRestoreRespItem
                      type: object
                      properties:
                        id:
                          type: string
                          description: The ID of the restore task.
                          format: uint64
                          example: restore-1
                        create_timestamp:
                          type: string
                          description: The creation time of the backup in UTC. The
                            time format follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601)
                            standard, which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS`
                            (hour-minutes-seconds) + Z. For example, `2020-01-01T00:00:00Z`.
                          format: date-time
                          example: 2020-01-01T00:00:00Z
                        backup_id:
                          type: string
                          description: The ID of the backup.
                          format: uint64
                          example: "1"
                        cluster_id:
                          type: string
                          description: The cluster ID of the backup.
                          format: uint64
                          example: "1"
                        status:
                          type: string
                          description: The status of restore.
                          example: PENDING
                          enum:
                          - PENDING
                          - RUNNING
                          - FAILED
                          - SUCCESS
                        cluster:
                          title: ClusterInfoOfRestore
                          type: object
                          properties:
                            id:
                              type: string
                              description: The ID of the cluster.
                              format: uint64
                              example: "1"
                            name:
                              type: string
                              description: The name of the cluster.
                              example: cluster-1
                            status:
                              type: string
                              description: The status of the cluster.
                              example: AVAILABLE
                          description: The cluster info of restore.
                        error_message:
                          type: string
                          description: The error message of restore if failed.
                          example: Please contact support.
                      description: The item of restore list.
                  total:
                    type: integer
                    description: total
                    format: int64
                    example: 10
                description: This response for list restore.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url 'https://api.tidbcloud.com/api/v1/tidb/projects/{project_id}/restores?page=1&page_size=10'
  /api/v1/tidb/restores:
    post:
      tags:
      - Restore
      summary: Create a restore task.
      description: "You can use this endpoint to restore data from a previously created\
        \ backup file. \n\n**Limitations:**\n\n- For Dedicated Tier, you can only\
        \ restore data from a smaller node size to a larger node size.\n\n- You cannot\
        \ restore data from a Dedicated Tier cluster to a Developer Tier cluster,\
        \ nor from a Developer Tier cluster to a Dedicated Tier cluster."
      operationId: CreateRestoreTask
      requestBody:
        content:
          application/json:
            schema:
              title: CreateRestoreReq
              required:
              - backup_id
              - cluster_spec
              - name
              - project_id
              type: object
              properties:
                backup_id:
                  type: string
                  description: The ID of the backup.
                  format: uuid
                project_id:
                  type: string
                  description: The ID of the project. You can get the project ID from
                    the response of [List all accessible projects.](#tag/Project/operation/ListProjects).
                  format: uuid
                name:
                  pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
                  type: string
                  description: The name of a new cluster. This must be different from
                    the name of the existing cluster.
                  example: Cluster0
                port:
                  maximum: 65535
                  minimum: 1024
                  type: integer
                  description: TiDB port for application connection. The port must
                    be in the range of 1024-65535 except 10080.
                  format: int32
                  example: 4000
                  default: 4000
                cluster_spec:
                  type: array
                  description: Cluster spec.
                  example:
                  - node_type: TIDB
                    node_size: 8 vCPU, 16 GiB
                    storage_size_gib: 0
                    node_quantity: 1
                  - node_type: TIKV
                    node_size: 8 vCPU, 64 GiB
                    storage_size_gib: 1024
                    node_quantity: 3
                  items:
                    required:
                    - node_quantity
                    - node_size
                    - node_type
                    - storage_size_gib
                    type: object
                    properties:
                      node_type:
                        type: string
                        description: |-
                          The type of a node in the cluster.

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
                          - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
                        example: TIKV
                        enum:
                        - TIDB
                        - TIKV
                        - TIFLASH
                      node_size:
                        type: string
                        description: |-
                          The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
                          - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

                          **Limitations**:
                          - Can not modify `node_size` of an existing cluster.
                        example: 8C64G
                      storage_size_gib:
                        type: integer
                        description: |-
                          The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
                          - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

                          **Limitations**:
                          - Can not modify `storage_size_gib` of an existing cluster.
                        format: int32
                        example: 1024
                      node_quantity:
                        type: integer
                        description: |-
                          The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                          **Additional combination rules**:
                          - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

                          **Limitations**:
                          - TiKV and TiFlash do not support decreasing node quantity.
                          - The `node_quantity` of TiKV must be a multiple of 3.
                        format: int32
                        example: 3
              description: CreateRestoreReq is the request for restoring backup to
                a new cluster.
        required: true
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: CreateRestoreResp
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the restore.
                    format: uint64
                    example: "1"
                  cluster_id:
                    type: string
                    description: The ID of the cluster. You can get the cluster ID
                      from the response of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
                    format: uint64
                    example: "1"
                description: CreateRestoreResp is the response for restoring backup
                  to a new cluster.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request POST \
            --url https://api.tidbcloud.com/api/v1/tidb/restores \
            --header 'content-type: application/json' \
            --data '{"backup_id":"1","project_id":"1","name":"Cluster0","port":4000,"cluster_spec":[{"node_type":"TIDB","node_size":"8 vCPU, 16 GiB","storage_size_gib":0,"node_quantity":1},{"node_type":"TIKV","node_size":"8 vCPU, 64 GiB","storage_size_gib":1024,"node_quantity":3}]}'
      x-codegen-request-body-name: body
  /api/v1/tidb/restores/{restore_id}:
    get:
      tags:
      - Restore
      summary: Get a restore task.
      operationId: GetRestoreTask
      parameters:
      - name: restore_id
        in: path
        description: The ID of the restore task.
        required: true
        schema:
          type: string
          format: uint64
      responses:
        200:
          description: A successful response.
          content:
            application/json:
              schema:
                title: GetRestoreResp
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the restore task.
                    format: uint64
                    example: "1"
                  create_timestamp:
                    type: string
                    description: The creation time of the backup in UTC. The time
                      format follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601)
                      standard, which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS`
                      (hour-minutes-seconds) + Z. For example, `2020-01-01T00:00:00Z`.
                    format: date-time
                    example: 2020-01-01T00:00:00Z
                  backup_id:
                    type: string
                    description: The ID of the backup.
                    format: uint64
                    example: "1"
                  cluster_id:
                    type: string
                    description: The cluster ID of the backup.
                    format: uint64
                    example: "1"
                  status:
                    type: string
                    description: The status of restore.
                    example: PENDING
                    enum:
                    - PENDING
                    - RUNNING
                    - FAILED
                    - SUCCESS
                  cluster:
                    title: ClusterInfoOfRestore
                    type: object
                    properties:
                      id:
                        type: string
                        description: The ID of the cluster.
                        format: uint64
                        example: "1"
                      name:
                        type: string
                        description: The name of the cluster.
                        example: cluster-1
                      status:
                        type: string
                        description: The status of the cluster.
                        example: AVAILABLE
                    description: The cluster info of restore.
                  error_message:
                    type: string
                    description: The error message of restore if failed.
                    example: Please contact support.
                description: The response for get restore.
        400:
          description: A request field is invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        401:
          description: The API key cannot be authenticated.
          content:
            application/json:
              schema:
                type: object
        403:
          description: The API key does not have permission to access the resource.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        404:
          description: The requested resource does not exist.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        429:
          description: You have exceed the rate limit.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        500:
          description: Server error.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    title: code
                    type: integer
                    description: Error code returned with this error.
                    format: integer
                  message:
                    title: message
                    type: string
                    description: Error message returned with this error.
                  details:
                    title: details
                    type: array
                    description: Error details returned with this error.
                    items:
                      type: string
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    format: int32
                  message:
                    type: string
                  details:
                    type: array
                    items:
                      type: object
                      additionalProperties:
                        type: object
      x-code-samples:
      - lang: curl
        source: |-
          curl --digest \
            --user 'YOUR_PUBLIC_KEY:YOUR_PRIVATE_KEY' \
            --request GET \
            --url https://api.tidbcloud.com/api/v1/tidb/restores/{restore_id}
security:
  - DigestAuth: []
components:
  securitySchemes:
    DigestAuth:
      type: http
      scheme: digest
  schemas:
    ClusterNodeClusterNodeStatus:
      type: string
      enum:
      - AVAILABLE
      - UNAVAILABLE
      - CREATING
      - DELETING
    ErrorResponse:
      type: object
      properties:
        code:
          title: code
          type: integer
          description: Error code returned with this error.
          format: integer
        message:
          title: message
          type: string
          description: Error message returned with this error.
        details:
          title: details
          type: array
          description: Error details returned with this error.
          items:
            type: string
    openapiBackupTypeEnum:
      type: string
      enum:
      - MANUAL
      - AUTO
    openapiCloudProvider:
      type: string
      enum:
      - AWS
      - GCP
    openapiClusterConnectionStrings:
      type: object
      properties:
        standard:
          type: string
          description: |-
            Standard connection string.

            You must configure the [IP Access List](https://docs.pingcap.com/tidbcloud/connect-to-tidb-cluster#connect-via-standard-connection) for the cluster you created on [TiDB Cloud console](https://tidbcloud.com/) before connecting to this connection string.
          example: tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
        vpc_peering:
          type: string
          description: |-
            [VPC peering](https://docs.pingcap.com/tidbcloud/tidb-cloud-glossary#vpc-peering) connection string.

            You must [Set up VPC peering connections](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections) for the project before connecting to this private connection string.
          example: private-tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
    openapiClusterInfoOfRestore:
      title: ClusterInfoOfRestore
      type: object
      properties:
        id:
          type: string
          description: The ID of the cluster.
          format: uint64
          example: "1"
        name:
          type: string
          description: The name of the cluster.
          example: cluster-1
        status:
          type: string
          description: The status of the cluster.
          example: AVAILABLE
      description: The cluster info of restore.
    openapiClusterItem:
      title: ClusterItem
      required:
      - id
      - project_id
      type: object
      properties:
        id:
          type: string
          description: The ID of the cluster.
          format: uuid
        project_id:
          type: string
          description: The ID of the project.
          format: uuid
        name:
          pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
          type: string
          description: The name of the cluster.
          example: Cluster0
        port:
          type: integer
          description: The TiDB port for connection.
          format: int32
          example: 4000
        tidb_version:
          type: string
          description: TiDB version.
          example: v6.1.0
        cluster_type:
          type: string
          description: |-
            The cluster type:
            - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
            - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster.
          format: enum
          example: DEDICATED
          enum:
          - DEDICATED
          - SHARED
        cloud_provider:
          type: string
          description: |-
            The cloud provider on which your TiDB cluster is hosted.
            - `"AWS"`: the Amazon Web Services cloud provider
            - `"GCP"`: the Google Cloud Platform cloud provider
          format: string
          example: AWS
          enum:
          - AWS
          - GCP
        region:
          type: string
          description: Region of the cluster.
          example: us-west-2
        status:
          type: string
          description: Status of the cluster.
          format: enum
          example: AVAILABLE
          enum:
          - AVAILABLE
          - CREATING
          - MODIFYING
        create_timestamp:
          type: string
          description: The creation time of the cluster in Unix timestamp seconds
            (epoch time).
          format: timestamp
          example: "1656991448"
        config:
          type: array
          description: The configuration of the cluster.
          example:
          - node_type: TIDB
            node_size: 8C16G
            vcpu_num: 8
            ram_bytes: "17179869184"
            storage_size_gib: 0
            node_quantity: 1
          - node_type: TIKV
            node_size: 8C64G
            vcpu_num: 8
            ram_bytes: "68719476736"
            storage_size_gib: 1024
            node_quantity: 3
          items:
            type: object
            properties:
              node_type:
                type: string
                description: The type of a node in the cluster.
                example: TIKV
                enum:
                - TIDB
                - TIKV
                - TIFLASH
              node_size:
                type: string
                description: The size of the `node_type` in the cluster.
                example: 8C64G
              vcpu_num:
                type: integer
                description: The total vCPUs of a node in the cluster. If the `cluster_type`
                  is `"SHARED"`, `vcpu_num` is always 0.
                format: int32
                example: 8
              ram_bytes:
                type: string
                description: The RAM size of a node in the cluster. If the `cluster_type`
                  is `"SHARED"`, `ram_bytes` is always 0.
                format: int64
                example: "68719476736"
              storage_size_gib:
                type: integer
                description: The storage size of a node in the cluster.
                format: int32
                example: 1024
              node_quantity:
                type: integer
                description: The number of nodes in the cluster.
                format: int32
                example: 3
        node_map:
          type: array
          description: Node map. The `node_map` is not returned when the `status`
            is `"CREATING"`.
          example:
          - node_name: tidb-0
            node_type: TIDB
            availability_zone: us-west-2a
            node_size: 8C16G
            vcpu_num: 8
            ram_bytes: "17179869184"
            storage_size_gib: 0
            status: AVAILABLE
          - node_name: tikv-0
            node_type: TIKV
            availability_zone: us-west-2a
            node_size: 8C64G
            vcpu_num: 8
            ram_bytes: "68719476736"
            storage_size_gib: 1024
            status: AVAILABLE
          - node_name: tikv-1
            node_type: TIKV
            availability_zone: us-west-2b
            node_size: 8C64G
            vcpu_num: 8
            ram_bytes: "68719476736"
            storage_size_gib: 1024
            status: AVAILABLE
          - node_name: tikv-2
            node_type: TIKV
            availability_zone: us-west-2c
            node_size: 8C64G
            vcpu_num: 8
            ram_bytes: "68719476736"
            storage_size_gib: 1024
            status: AVAILABLE
          items:
            type: object
            properties:
              node_name:
                type: string
                description: The name of a node in the cluster.
                example: tikv-1
              node_type:
                type: string
                description: The type of a node in the cluster.
                example: TIKV
                enum:
                - TIDB
                - TIKV
                - TIFLASH
              availability_zone:
                type: string
                description: The availability zone of a node in the cluster.
                example: us-west-2a
              node_size:
                type: string
                description: The size of the `node_type` in the cluster.
                example: 8C64G
              vcpu_num:
                type: integer
                description: The total vCPUs of a node in the cluster. If the `cluster_type`
                  is `"SHARED"`, `vcpu_num` is always 0.
                format: int32
                example: 8
              ram_bytes:
                type: string
                description: The RAM size of a node in the cluster. If the `cluster_type`
                  is `"SHARED"`, `ram_bytes` is always 0.
                format: int64
                example: "68719476736"
              storage_size_gib:
                type: integer
                description: The storage size of a node in the cluster.
                format: int32
                example: 1024
              status:
                type: string
                description: The status of a node in the cluster.
                example: AVAILABLE
                enum:
                - AVAILABLE
                - UNAVAILABLE
                - CREATING
                - DELETING
        connection_strings:
          type: object
          properties:
            standard:
              type: string
              description: |-
                Standard connection string.

                You must configure the [IP Access List](https://docs.pingcap.com/tidbcloud/connect-to-tidb-cluster#connect-via-standard-connection) for the cluster you created on [TiDB Cloud console](https://tidbcloud.com/) before connecting to this connection string.
              example: tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
            vpc_peering:
              type: string
              description: |-
                [VPC peering](https://docs.pingcap.com/tidbcloud/tidb-cloud-glossary#vpc-peering) connection string.

                You must [Set up VPC peering connections](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections) for the project before connecting to this private connection string.
              example: private-tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
          description: Connection strings.
      description: ClusterItem is the information of cluster.
    openapiClusterNode:
      type: object
      properties:
        node_name:
          type: string
          description: The name of a node in the cluster.
          example: tikv-1
        node_type:
          type: string
          description: The type of a node in the cluster.
          example: TIKV
          enum:
          - TIDB
          - TIKV
          - TIFLASH
        availability_zone:
          type: string
          description: The availability zone of a node in the cluster.
          example: us-west-2a
        node_size:
          type: string
          description: The size of the `node_type` in the cluster.
          example: 8C64G
        vcpu_num:
          type: integer
          description: The total vCPUs of a node in the cluster. If the `cluster_type`
            is `"SHARED"`, `vcpu_num` is always 0.
          format: int32
          example: 8
        ram_bytes:
          type: string
          description: The RAM size of a node in the cluster. If the `cluster_type`
            is `"SHARED"`, `ram_bytes` is always 0.
          format: int64
          example: "68719476736"
        storage_size_gib:
          type: integer
          description: The storage size of a node in the cluster.
          format: int32
          example: 1024
        status:
          type: string
          description: The status of a node in the cluster.
          example: AVAILABLE
          enum:
          - AVAILABLE
          - UNAVAILABLE
          - CREATING
          - DELETING
    openapiClusterNodeSpec:
      type: object
      properties:
        node_type:
          type: string
          description: The type of a node in the cluster.
          example: TIKV
          enum:
          - TIDB
          - TIKV
          - TIFLASH
        node_size:
          type: string
          description: The size of the `node_type` in the cluster.
          example: 8C64G
        vcpu_num:
          type: integer
          description: The total vCPUs of a node in the cluster. If the `cluster_type`
            is `"SHARED"`, `vcpu_num` is always 0.
          format: int32
          example: 8
        ram_bytes:
          type: string
          description: The RAM size of a node in the cluster. If the `cluster_type`
            is `"SHARED"`, `ram_bytes` is always 0.
          format: int64
          example: "68719476736"
        storage_size_gib:
          type: integer
          description: The storage size of a node in the cluster.
          format: int32
          example: 1024
        node_quantity:
          type: integer
          description: The number of nodes in the cluster.
          format: int32
          example: 3
    openapiClusterNodeType:
      type: string
      enum:
      - TIDB
      - TIKV
      - TIFLASH
    openapiClusterStatus:
      type: string
      enum:
      - AVAILABLE
      - CREATING
      - MODIFYING
    openapiClusterType:
      type: string
      enum:
      - DEDICATED
      - SHARED
    openapiCreateBackupResp:
      title: CreateBackupResp
      type: object
      properties:
        id:
          type: string
          description: The ID of the backup.
          format: uint64
          example: "1"
      description: This response for creating a MANUAL type backup.
    openapiCreateClusterNodeSpec:
      required:
      - node_quantity
      - node_size
      - node_type
      - storage_size_gib
      type: object
      properties:
        node_type:
          type: string
          description: |-
            The type of a node in the cluster.

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
            - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
          example: TIKV
          enum:
          - TIDB
          - TIKV
          - TIFLASH
        node_size:
          type: string
          description: |-
            The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
            - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
            - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

            **Limitations**:
            - Can not modify `node_size` of an existing cluster.
          example: 8C64G
        storage_size_gib:
          type: integer
          description: |-
            The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
            - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

            **Limitations**:
            - Can not modify `storage_size_gib` of an existing cluster.
          format: int32
          example: 1024
        node_quantity:
          type: integer
          description: |-
            The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

            **Limitations**:
            - TiKV and TiFlash do not support decreasing node quantity.
            - The `node_quantity` of TiKV must be a multiple of 3.
          format: int32
          example: 3
    openapiCreateClusterReq:
      title: CreateClusterReq
      required:
      - cloud_provider
      - config
      - name
      - project_id
      - region
      type: object
      properties:
        project_id:
          type: string
          description: The ID of the project. You can get the project ID from the
            response of [List all accessible projects](#tag/Cluster/operation/ListProjects).
          format: uuid
        name:
          pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
          type: string
          description: The name of the cluster. The name must be 4-64 characters that
            can only include numbers, letters, and hyphens, and the first and last
            character must be a letter or number.
          example: Cluster0
        root_password:
          type: string
          description: The root password to access the cluster. This field is optional,
            if set, it must be 8-64 characters.
          example: password_example
        port:
          maximum: 65535
          minimum: 1024
          type: integer
          description: |-
            The TiDB port for connection. The port must be in the range of 1024-65535 except 10080.

            **Limitations**:
            - For a shared cluster (Developer Tier), only port `4000` is available.
          format: int32
          example: 4000
          default: 4000
        cluster_type:
          type: string
          description: |-
            The cluster type.
            - `"SHARED"`: create a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
            - `"DEDICATED"`: create a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster. Before creating a Dedicated Tier cluster, you must [set a Project CIDR](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections#prerequisite-set-a-project-cidr) on [TiDB Cloud console](https://tidbcloud.com/).
          format: enum
          example: SHARED
          default: DEDICATED
          enum:
          - DEDICATED
          - SHARED
        cloud_provider:
          type: string
          description: |-
            The cloud provider on which your TiDB cluster is hosted.
            - `"AWS"`: the Amazon Web Services cloud provider
            - `"GCP"`: the Google Cloud Platform cloud provider
          format: string
          example: AWS
          enum:
          - AWS
          - GCP
        region:
          type: string
          description: |
            The region value should match the cloud provider's region code. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
            | Cloud provider | Region name              | Region          |
            |----------------|--------------------------|-----------------|
            | AWS            | US East (N. Virginia)    | us-east-1       |
            | AWS            | US West (Oregon)         | us-west-2       |
            | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
            | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
            | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
            | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
            | AWS            | Europe (Frankfurt)       | eu-central-1    |
            | GCP            | Iowa                     | us-central1     |
            | GCP            | Oregon                   | us-west1        |
            | GCP            | Tokyo                    | asia-northeast1 |
            | GCP            | Singapore                | asia-southeast1 |
            | GCP            | Taiwan                   | asia-east1      |
          example: us-west-2
        config:
          type: array
          description: The configuration of the cluster.
          example:
          - node_type: TIDB
            node_size: Shared0
            node_quantity: 1
          - node_type: TIKV
            node_size: Shared0
            storage_size_gib: 1
            node_quantity: 1
          - node_type: TIFLASH
            node_size: Shared0
            storage_size_gib: 1
            node_quantity: 1
          items:
            required:
            - node_quantity
            - node_size
            - node_type
            - storage_size_gib
            type: object
            properties:
              node_type:
                type: string
                description: |-
                  The type of a node in the cluster.

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
                  - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
                example: TIKV
                enum:
                - TIDB
                - TIKV
                - TIFLASH
              node_size:
                type: string
                description: |-
                  The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
                  - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
                  - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

                  **Limitations**:
                  - Can not modify `node_size` of an existing cluster.
                example: 8C64G
              storage_size_gib:
                type: integer
                description: |-
                  The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
                  - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

                  **Limitations**:
                  - Can not modify `storage_size_gib` of an existing cluster.
                format: int32
                example: 1024
              node_quantity:
                type: integer
                description: |-
                  The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

                  **Limitations**:
                  - TiKV and TiFlash do not support decreasing node quantity.
                  - The `node_quantity` of TiKV must be a multiple of 3.
                format: int32
                example: 3
      description: CreateClusterReq is the request for creating cluster.
    openapiCreateClusterResp:
      title: CreateClusterResp
      required:
      - id
      type: object
      properties:
        id:
          type: string
          description: The ID of the cluster.
          format: uuid
      description: CreateClusterResp is the response for creating cluster.
    openapiCreateRestoreReq:
      title: CreateRestoreReq
      required:
      - backup_id
      - cluster_spec
      - name
      - project_id
      type: object
      properties:
        backup_id:
          type: string
          description: The ID of the backup.
          format: uuid
        project_id:
          type: string
          description: The ID of the project. You can get the project ID from the
            response of [List all accessible projects.](#tag/Project/operation/ListProjects).
          format: uuid
        name:
          pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
          type: string
          description: The name of a new cluster. This must be different from the
            name of the existing cluster.
          example: Cluster0
        port:
          maximum: 65535
          minimum: 1024
          type: integer
          description: TiDB port for application connection. The port must be in the
            range of 1024-65535 except 10080.
          format: int32
          example: 4000
          default: 4000
        cluster_spec:
          type: array
          description: Cluster spec.
          example:
          - node_type: TIDB
            node_size: 8 vCPU, 16 GiB
            storage_size_gib: 0
            node_quantity: 1
          - node_type: TIKV
            node_size: 8 vCPU, 64 GiB
            storage_size_gib: 1024
            node_quantity: 3
          items:
            required:
            - node_quantity
            - node_size
            - node_type
            - storage_size_gib
            type: object
            properties:
              node_type:
                type: string
                description: |-
                  The type of a node in the cluster.

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
                  - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
                example: TIKV
                enum:
                - TIDB
                - TIKV
                - TIFLASH
              node_size:
                type: string
                description: |-
                  The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
                  - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
                  - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

                  **Limitations**:
                  - Can not modify `node_size` of an existing cluster.
                example: 8C64G
              storage_size_gib:
                type: integer
                description: |-
                  The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
                  - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

                  **Limitations**:
                  - Can not modify `storage_size_gib` of an existing cluster.
                format: int32
                example: 1024
              node_quantity:
                type: integer
                description: |-
                  The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

                  **Additional combination rules**:
                  - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

                  **Limitations**:
                  - TiKV and TiFlash do not support decreasing node quantity.
                  - The `node_quantity` of TiKV must be a multiple of 3.
                format: int32
                example: 3
      description: CreateRestoreReq is the request for restoring backup to a new cluster.
    openapiCreateRestoreResp:
      title: CreateRestoreResp
      type: object
      properties:
        id:
          type: string
          description: The ID of the restore.
          format: uint64
          example: "1"
        cluster_id:
          type: string
          description: The ID of the cluster. You can get the cluster ID from the
            response of [Get all clusters in a project](#tag/Cluster/operation/ListClustersOfProject).
          format: uint64
          example: "1"
      description: CreateRestoreResp is the response for restoring backup to a new
        cluster.
    openapiGetBackupOfClusterResp:
      title: GetBackupOfClusterResp
      type: object
      properties:
        id:
          type: string
          description: The ID of the backup.
          format: uint64
          example: "1"
        name:
          type: string
          description: The name of the backup.
          example: backup-1
        description:
          type: string
          description: The description of the backup. It is specified by the user
            when taking a manual type backup. It helps you add additional information
            to the backup.
          example: backup for cluster upgrade in 2022/06/07
        type:
          type: string
          description: The type of backup. TiDB Cloud only supports manual and auto
            backup. For more information, see [TiDB Cloud Documentation](https://docs.pingcap.com/tidbcloud/backup-and-restore#backup).
          example: MANUAL
          enum:
          - MANUAL
          - AUTO
        create_timestamp:
          type: string
          description: The creation time of the backup in UTC. The time format follows
            the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard, which is
            `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds) +
            Z. For example, `2020-01-01T00:00:00Z`.
          format: date-time
          example: 2020-01-01T00:00:00Z
        size:
          type: string
          description: The bytes of the backup.
          format: uint64
          example: "102400"
        status:
          type: string
          description: The status of backup.
          example: SUCCESS
          enum:
          - PENDING
          - RUNNING
          - FAILED
          - SUCCESS
      description: This response for getting backup of a cluster.
    openapiGetBackupOfClusterRespStatusEnum:
      type: string
      enum:
      - PENDING
      - RUNNING
      - FAILED
      - SUCCESS
    openapiGetRestoreResp:
      title: GetRestoreResp
      type: object
      properties:
        id:
          type: string
          description: The ID of the restore task.
          format: uint64
          example: "1"
        create_timestamp:
          type: string
          description: The creation time of the backup in UTC. The time format follows
            the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard, which is
            `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds) +
            Z. For example, `2020-01-01T00:00:00Z`.
          format: date-time
          example: 2020-01-01T00:00:00Z
        backup_id:
          type: string
          description: The ID of the backup.
          format: uint64
          example: "1"
        cluster_id:
          type: string
          description: The cluster ID of the backup.
          format: uint64
          example: "1"
        status:
          type: string
          description: The status of restore.
          example: PENDING
          enum:
          - PENDING
          - RUNNING
          - FAILED
          - SUCCESS
        cluster:
          title: ClusterInfoOfRestore
          type: object
          properties:
            id:
              type: string
              description: The ID of the cluster.
              format: uint64
              example: "1"
            name:
              type: string
              description: The name of the cluster.
              example: cluster-1
            status:
              type: string
              description: The status of the cluster.
              example: AVAILABLE
          description: The cluster info of restore.
        error_message:
          type: string
          description: The error message of restore if failed.
          example: Please contact support.
      description: The response for get restore.
    openapiGetRestoreRespStatusEnum:
      type: string
      enum:
      - PENDING
      - RUNNING
      - FAILED
      - SUCCESS
    openapiListBackupItem:
      title: ListBackupItem
      type: object
      properties:
        id:
          type: string
          description: The ID of the backup. It is generated by TiDB Cloud.
          format: uint64
          example: "1"
        name:
          type: string
          description: The name of the backup.
          example: backup-1
        description:
          type: string
          description: The description of the backup. It is specified by the user
            when taking a manual type backup. It helps you add additional information
            to the backup.
          example: backup for cluster upgrade in 2022/06/07
        type:
          type: string
          description: The type of backup. TiDB Cloud only supports manual and auto
            backup. For more information, see [TiDB Cloud Documentation](https://docs.pingcap.com/tidbcloud/backup-and-restore#backup).
          example: MANUAL
          enum:
          - MANUAL
          - AUTO
        create_timestamp:
          type: string
          description: The creation time of the backup in UTC. The time format follows
            the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard, which is
            `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds) +
            Z. For example, `2020-01-01T00:00:00Z`.
          format: date-time
          example: 2020-01-01T00:00:00Z
        size:
          type: string
          description: The bytes of the backup.
          format: uint64
          example: "102400"
        status:
          type: string
          description: The status of backup.
          example: SUCCESS
          enum:
          - PENDING
          - RUNNING
          - FAILED
          - SUCCESS
      description: The item of backup list.
    openapiListBackupItemStatusEnum:
      type: string
      enum:
      - PENDING
      - RUNNING
      - FAILED
      - SUCCESS
    openapiListBackupOfClusterResp:
      title: ListBackupOfClusterResp
      type: object
      properties:
        items:
          type: array
          description: The items of all backups.
          items:
            title: ListBackupItem
            type: object
            properties:
              id:
                type: string
                description: The ID of the backup. It is generated by TiDB Cloud.
                format: uint64
                example: "1"
              name:
                type: string
                description: The name of the backup.
                example: backup-1
              description:
                type: string
                description: The description of the backup. It is specified by the
                  user when taking a manual type backup. It helps you add additional
                  information to the backup.
                example: backup for cluster upgrade in 2022/06/07
              type:
                type: string
                description: The type of backup. TiDB Cloud only supports manual and
                  auto backup. For more information, see [TiDB Cloud Documentation](https://docs.pingcap.com/tidbcloud/backup-and-restore#backup).
                example: MANUAL
                enum:
                - MANUAL
                - AUTO
              create_timestamp:
                type: string
                description: The creation time of the backup in UTC. The time format
                  follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard,
                  which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds)
                  + Z. For example, `2020-01-01T00:00:00Z`.
                format: date-time
                example: 2020-01-01T00:00:00Z
              size:
                type: string
                description: The bytes of the backup.
                format: uint64
                example: "102400"
              status:
                type: string
                description: The status of backup.
                example: SUCCESS
                enum:
                - PENDING
                - RUNNING
                - FAILED
                - SUCCESS
            description: The item of backup list.
        total:
          type: integer
          description: The total number of backups.
          format: int64
          example: 10
      description: The response for listing backups of a cluster.
    openapiListClustersOfProjectResp:
      title: GetClustersOfProjectResp
      required:
      - items
      - total
      type: object
      properties:
        items:
          type: array
          description: The items of clusters in the project.
          items:
            title: ClusterItem
            required:
            - id
            - project_id
            type: object
            properties:
              id:
                type: string
                description: The ID of the cluster.
                format: uuid
              project_id:
                type: string
                description: The ID of the project.
                format: uuid
              name:
                pattern: ^[A-Za-z0-9][-A-Za-z0-9]{2,62}[A-Za-z0-9]$
                type: string
                description: The name of the cluster.
                example: Cluster0
              port:
                type: integer
                description: The TiDB port for connection.
                format: int32
                example: 4000
              tidb_version:
                type: string
                description: TiDB version.
                example: v6.1.0
              cluster_type:
                type: string
                description: |-
                  The cluster type:
                  - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                  - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster.
                format: enum
                example: DEDICATED
                enum:
                - DEDICATED
                - SHARED
              cloud_provider:
                type: string
                description: |-
                  The cloud provider on which your TiDB cluster is hosted.
                  - `"AWS"`: the Amazon Web Services cloud provider
                  - `"GCP"`: the Google Cloud Platform cloud provider
                format: string
                example: AWS
                enum:
                - AWS
                - GCP
              region:
                type: string
                description: Region of the cluster.
                example: us-west-2
              status:
                type: string
                description: Status of the cluster.
                format: enum
                example: AVAILABLE
                enum:
                - AVAILABLE
                - CREATING
                - MODIFYING
              create_timestamp:
                type: string
                description: The creation time of the cluster in Unix timestamp seconds
                  (epoch time).
                format: timestamp
                example: "1656991448"
              config:
                type: array
                description: The configuration of the cluster.
                example:
                - node_type: TIDB
                  node_size: 8C16G
                  vcpu_num: 8
                  ram_bytes: "17179869184"
                  storage_size_gib: 0
                  node_quantity: 1
                - node_type: TIKV
                  node_size: 8C64G
                  vcpu_num: 8
                  ram_bytes: "68719476736"
                  storage_size_gib: 1024
                  node_quantity: 3
                items:
                  type: object
                  properties:
                    node_type:
                      type: string
                      description: The type of a node in the cluster.
                      example: TIKV
                      enum:
                      - TIDB
                      - TIKV
                      - TIFLASH
                    node_size:
                      type: string
                      description: The size of the `node_type` in the cluster.
                      example: 8C64G
                    vcpu_num:
                      type: integer
                      description: The total vCPUs of a node in the cluster. If the
                        `cluster_type` is `"SHARED"`, `vcpu_num` is always 0.
                      format: int32
                      example: 8
                    ram_bytes:
                      type: string
                      description: The RAM size of a node in the cluster. If the `cluster_type`
                        is `"SHARED"`, `ram_bytes` is always 0.
                      format: int64
                      example: "68719476736"
                    storage_size_gib:
                      type: integer
                      description: The storage size of a node in the cluster.
                      format: int32
                      example: 1024
                    node_quantity:
                      type: integer
                      description: The number of nodes in the cluster.
                      format: int32
                      example: 3
              node_map:
                type: array
                description: Node map. The `node_map` is not returned when the `status`
                  is `"CREATING"`.
                example:
                - node_name: tidb-0
                  node_type: TIDB
                  availability_zone: us-west-2a
                  node_size: 8C16G
                  vcpu_num: 8
                  ram_bytes: "17179869184"
                  storage_size_gib: 0
                  status: AVAILABLE
                - node_name: tikv-0
                  node_type: TIKV
                  availability_zone: us-west-2a
                  node_size: 8C64G
                  vcpu_num: 8
                  ram_bytes: "68719476736"
                  storage_size_gib: 1024
                  status: AVAILABLE
                - node_name: tikv-1
                  node_type: TIKV
                  availability_zone: us-west-2b
                  node_size: 8C64G
                  vcpu_num: 8
                  ram_bytes: "68719476736"
                  storage_size_gib: 1024
                  status: AVAILABLE
                - node_name: tikv-2
                  node_type: TIKV
                  availability_zone: us-west-2c
                  node_size: 8C64G
                  vcpu_num: 8
                  ram_bytes: "68719476736"
                  storage_size_gib: 1024
                  status: AVAILABLE
                items:
                  type: object
                  properties:
                    node_name:
                      type: string
                      description: The name of a node in the cluster.
                      example: tikv-1
                    node_type:
                      type: string
                      description: The type of a node in the cluster.
                      example: TIKV
                      enum:
                      - TIDB
                      - TIKV
                      - TIFLASH
                    availability_zone:
                      type: string
                      description: The availability zone of a node in the cluster.
                      example: us-west-2a
                    node_size:
                      type: string
                      description: The size of the `node_type` in the cluster.
                      example: 8C64G
                    vcpu_num:
                      type: integer
                      description: The total vCPUs of a node in the cluster. If the
                        `cluster_type` is `"SHARED"`, `vcpu_num` is always 0.
                      format: int32
                      example: 8
                    ram_bytes:
                      type: string
                      description: The RAM size of a node in the cluster. If the `cluster_type`
                        is `"SHARED"`, `ram_bytes` is always 0.
                      format: int64
                      example: "68719476736"
                    storage_size_gib:
                      type: integer
                      description: The storage size of a node in the cluster.
                      format: int32
                      example: 1024
                    status:
                      type: string
                      description: The status of a node in the cluster.
                      example: AVAILABLE
                      enum:
                      - AVAILABLE
                      - UNAVAILABLE
                      - CREATING
                      - DELETING
              connection_strings:
                type: object
                properties:
                  standard:
                    type: string
                    description: |-
                      Standard connection string.

                      You must configure the [IP Access List](https://docs.pingcap.com/tidbcloud/connect-to-tidb-cluster#connect-via-standard-connection) for the cluster you created on [TiDB Cloud console](https://tidbcloud.com/) before connecting to this connection string.
                    example: tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                  vpc_peering:
                    type: string
                    description: |-
                      [VPC peering](https://docs.pingcap.com/tidbcloud/tidb-cloud-glossary#vpc-peering) connection string.

                      You must [Set up VPC peering connections](https://docs.pingcap.com/tidbcloud/set-up-vpc-peering-connections) for the project before connecting to this private connection string.
                    example: private-tidb.f69f3808.acea1f2a.us-east-1.shared.aws.tidbcloud.com:4000
                description: Connection strings.
            description: ClusterItem is the information of cluster.
        total:
          type: integer
          description: Total number of clusters in the project.
          format: int64
          example: 1
      description: GetClustersOfProjectResp is the response for getting clusters of
        project.
    openapiListProjectItem:
      title: ListProjectItem
      type: object
      properties:
        id:
          type: string
          description: The ID of the project.
          format: uint64
          example: "1"
        org_id:
          type: string
          description: The ID of the TiDB Cloud organization to which the project
            belongs.
          format: uint64
          example: "1"
        name:
          type: string
          description: The name of the project.
          example: default_project
        cluster_count:
          type: integer
          description: The number of TiDB Cloud clusters deployed in the project.
          format: int64
          example: 4
        user_count:
          type: integer
          description: The number of users in the project.
          format: int64
          example: 10
        create_timestamp:
          type: string
          description: The creation time of the cluster in Unix timestamp seconds
            (epoch time).
          format: timestamp
          example: "1656991448"
      description: ListProjectItem is the item of projects.
    openapiListProjectsResp:
      title: GetProjectsResp
      required:
      - items
      - total
      type: object
      properties:
        items:
          type: array
          description: The items of accessible projects.
          items:
            title: ListProjectItem
            type: object
            properties:
              id:
                type: string
                description: The ID of the project.
                format: uint64
                example: "1"
              org_id:
                type: string
                description: The ID of the TiDB Cloud organization to which the project
                  belongs.
                format: uint64
                example: "1"
              name:
                type: string
                description: The name of the project.
                example: default_project
              cluster_count:
                type: integer
                description: The number of TiDB Cloud clusters deployed in the project.
                format: int64
                example: 4
              user_count:
                type: integer
                description: The number of users in the project.
                format: int64
                example: 10
              create_timestamp:
                type: string
                description: The creation time of the cluster in Unix timestamp seconds
                  (epoch time).
                format: timestamp
                example: "1656991448"
            description: ListProjectItem is the item of projects.
        total:
          type: integer
          description: The total number of accessible projects.
          format: int64
          example: 1
      description: GetProjectsResp is the response for getting accessible projects.
    openapiListProviderRegionsItem:
      title: ListProviderRegionsItem
      type: object
      properties:
        cluster_type:
          type: string
          description: |-
            The cluster type.
            - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
            - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster
          format: enum
          example: DEDICATED
          enum:
          - DEDICATED
          - SHARED
        node_type:
          type: string
          description: The type of a node in the cluster.
          example: TIDB
          enum:
          - TIDB
          - TIKV
          - TIFLASH
        node_size:
          type: string
          description: The size of the `node_type` in the cluster.
          example: 8C64G
        node_quantity:
          type: object
          properties:
            min:
              type: integer
              description: The minimum node quantity of the `node_type` in the cluster.
              format: int32
            step:
              type: integer
              description: The step of node quantity of the `node_type` in the cluster.
              format: int32
          description: The range and step of node quantity of the `node_type` in the
            cluster.
        storage_size_gib:
          type: object
          properties:
            min:
              type: integer
              description: The minimum storage size for each node of the `node_type`
                in the cluster.
              format: int32
            max:
              type: integer
              description: The maximum storage size for each node of the `node_type`
                in the cluster.
              format: int32
          description: The storage size range for each node of the `node_type` in
            the cluster.
        available_regions:
          type: array
          description: Available regions and providers.
          items:
            type: object
            properties:
              cloud_provider:
                type: string
                description: |-
                  The cloud provider on which your TiDB cluster is hosted.
                  - `"AWS"`: the Amazon Web Services cloud provider
                  - `"GCP"`: the Google Cloud Platform cloud provider
                format: string
                example: AWS
                enum:
                - AWS
                - GCP
              name:
                type: string
                description: |
                  The name of the region. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
                  | Cloud provider | Region name              | Region          |
                  |----------------|--------------------------|-----------------|
                  | AWS            | US East (N. Virginia)    | us-east-1       |
                  | AWS            | US West (Oregon)         | us-west-2       |
                  | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
                  | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
                  | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
                  | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
                  | AWS            | Europe (Frankfurt)       | eu-central-1    |
                  | GCP            | Iowa                     | us-central1     |
                  | GCP            | Oregon                   | us-west1        |
                  | GCP            | Tokyo                    | asia-northeast1 |
                  | GCP            | Singapore                | asia-southeast1 |
                  | GCP            | Taiwan                   | asia-east1      |
                example: us-west-2
      description: ListProviderRegionsItem is the item of provider regions.
    openapiListProviderRegionsResp:
      title: GetProviderRegionsResp
      type: object
      properties:
        items:
          type: array
          description: Items of provider regions.
          example:
          - cluster_type: DEDICATED
            node_type: TIDB
            node_size: 8C16G
            node_quantity:
              min: 1
              step: 1
            storage_size_gib:
              min: 0
              max: 0
            available_regions:
            - cloud_provider: AWS
              name: us-west-2
          - cluster_type: DEDICATED
            node_type: TIKV
            node_size: 8C64G
            node_quantity:
              min: 3
              step: 3
            storage_size_gib:
              min: 500
              max: 4096
            available_regions:
            - cloud_provider: AWS
              name: us-west-2
          - cluster_type: SHARED
            node_type: TIDB
            node_size: Shared0
            node_quantity:
              min: 1
              step: 1
            storage_size_gib:
              min: 0
              max: 0
            available_regions:
            - cloud_provider: AWS
              name: us-west-2
          - cluster_type: SHARED
            node_type: TIKV
            node_size: Shared0
            node_quantity:
              min: 1
              step: 1
            storage_size_gib:
              min: 1
              max: 1
            available_regions:
            - cloud_provider: AWS
              name: us-west-2
          - cluster_type: SHARED
            node_type: TIFLASH
            node_size: Shared0
            node_quantity:
              min: 1
              step: 1
            storage_size_gib:
              min: 1
              max: 1
            available_regions:
            - cloud_provider: AWS
              name: us-west-2
          items:
            title: ListProviderRegionsItem
            type: object
            properties:
              cluster_type:
                type: string
                description: |-
                  The cluster type.
                  - `"SHARED"`: a shared ([Developer Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#developer-tier)) cluster
                  - `"DEDICATED"`: a [Dedicated Tier](https://docs.pingcap.com/tidbcloud/select-cluster-tier#dedicated-tier) cluster
                format: enum
                example: DEDICATED
                enum:
                - DEDICATED
                - SHARED
              node_type:
                type: string
                description: The type of a node in the cluster.
                example: TIDB
                enum:
                - TIDB
                - TIKV
                - TIFLASH
              node_size:
                type: string
                description: The size of the `node_type` in the cluster.
                example: 8C64G
              node_quantity:
                type: object
                properties:
                  min:
                    type: integer
                    description: The minimum node quantity of the `node_type` in the
                      cluster.
                    format: int32
                  step:
                    type: integer
                    description: The step of node quantity of the `node_type` in the
                      cluster.
                    format: int32
                description: The range and step of node quantity of the `node_type`
                  in the cluster.
              storage_size_gib:
                type: object
                properties:
                  min:
                    type: integer
                    description: The minimum storage size for each node of the `node_type`
                      in the cluster.
                    format: int32
                  max:
                    type: integer
                    description: The maximum storage size for each node of the `node_type`
                      in the cluster.
                    format: int32
                description: The storage size range for each node of the `node_type`
                  in the cluster.
              available_regions:
                type: array
                description: Available regions and providers.
                items:
                  type: object
                  properties:
                    cloud_provider:
                      type: string
                      description: |-
                        The cloud provider on which your TiDB cluster is hosted.
                        - `"AWS"`: the Amazon Web Services cloud provider
                        - `"GCP"`: the Google Cloud Platform cloud provider
                      format: string
                      example: AWS
                      enum:
                      - AWS
                      - GCP
                    name:
                      type: string
                      description: |
                        The name of the region. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
                        | Cloud provider | Region name              | Region          |
                        |----------------|--------------------------|-----------------|
                        | AWS            | US East (N. Virginia)    | us-east-1       |
                        | AWS            | US West (Oregon)         | us-west-2       |
                        | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
                        | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
                        | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
                        | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
                        | AWS            | Europe (Frankfurt)       | eu-central-1    |
                        | GCP            | Iowa                     | us-central1     |
                        | GCP            | Oregon                   | us-west1        |
                        | GCP            | Tokyo                    | asia-northeast1 |
                        | GCP            | Singapore                | asia-southeast1 |
                        | GCP            | Taiwan                   | asia-east1      |
                      example: us-west-2
            description: ListProviderRegionsItem is the item of provider regions.
      description: GetProviderRegionsResp is the response for getting provider regions.
    openapiListRestoreOfProjectResp:
      title: ListRestoreResp
      type: object
      properties:
        items:
          type: array
          description: The items of restore list.
          items:
            title: ListRestoreRespItem
            type: object
            properties:
              id:
                type: string
                description: The ID of the restore task.
                format: uint64
                example: restore-1
              create_timestamp:
                type: string
                description: The creation time of the backup in UTC. The time format
                  follows the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard,
                  which is `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds)
                  + Z. For example, `2020-01-01T00:00:00Z`.
                format: date-time
                example: 2020-01-01T00:00:00Z
              backup_id:
                type: string
                description: The ID of the backup.
                format: uint64
                example: "1"
              cluster_id:
                type: string
                description: The cluster ID of the backup.
                format: uint64
                example: "1"
              status:
                type: string
                description: The status of restore.
                example: PENDING
                enum:
                - PENDING
                - RUNNING
                - FAILED
                - SUCCESS
              cluster:
                title: ClusterInfoOfRestore
                type: object
                properties:
                  id:
                    type: string
                    description: The ID of the cluster.
                    format: uint64
                    example: "1"
                  name:
                    type: string
                    description: The name of the cluster.
                    example: cluster-1
                  status:
                    type: string
                    description: The status of the cluster.
                    example: AVAILABLE
                description: The cluster info of restore.
              error_message:
                type: string
                description: The error message of restore if failed.
                example: Please contact support.
            description: The item of restore list.
        total:
          type: integer
          description: total
          format: int64
          example: 10
      description: This response for list restore.
    openapiListRestoreRespItem:
      title: ListRestoreRespItem
      type: object
      properties:
        id:
          type: string
          description: The ID of the restore task.
          format: uint64
          example: restore-1
        create_timestamp:
          type: string
          description: The creation time of the backup in UTC. The time format follows
            the [ISO8601](http://en.wikipedia.org/wiki/ISO_8601) standard, which is
            `YYYY-MM-DD` (year-month-day) + T +`HH:MM:SS` (hour-minutes-seconds) +
            Z. For example, `2020-01-01T00:00:00Z`.
          format: date-time
          example: 2020-01-01T00:00:00Z
        backup_id:
          type: string
          description: The ID of the backup.
          format: uint64
          example: "1"
        cluster_id:
          type: string
          description: The cluster ID of the backup.
          format: uint64
          example: "1"
        status:
          type: string
          description: The status of restore.
          example: PENDING
          enum:
          - PENDING
          - RUNNING
          - FAILED
          - SUCCESS
        cluster:
          title: ClusterInfoOfRestore
          type: object
          properties:
            id:
              type: string
              description: The ID of the cluster.
              format: uint64
              example: "1"
            name:
              type: string
              description: The name of the cluster.
              example: cluster-1
            status:
              type: string
              description: The status of the cluster.
              example: AVAILABLE
          description: The cluster info of restore.
        error_message:
          type: string
          description: The error message of restore if failed.
          example: Please contact support.
      description: The item of restore list.
    openapiListRestoreRespItemStatusEnum:
      type: string
      enum:
      - PENDING
      - RUNNING
      - FAILED
      - SUCCESS
    openapiNodeQuantityRange:
      type: object
      properties:
        min:
          type: integer
          description: The minimum node quantity of the `node_type` in the cluster.
          format: int32
        step:
          type: integer
          description: The step of node quantity of the `node_type` in the cluster.
          format: int32
    openapiNodeStorageSizeRange:
      type: object
      properties:
        min:
          type: integer
          description: The minimum storage size for each node of the `node_type` in
            the cluster.
          format: int32
        max:
          type: integer
          description: The maximum storage size for each node of the `node_type` in
            the cluster.
          format: int32
    openapiProviderAvailableRegion:
      type: object
      properties:
        cloud_provider:
          type: string
          description: |-
            The cloud provider on which your TiDB cluster is hosted.
            - `"AWS"`: the Amazon Web Services cloud provider
            - `"GCP"`: the Google Cloud Platform cloud provider
          format: string
          example: AWS
          enum:
          - AWS
          - GCP
        name:
          type: string
          description: |
            The name of the region. Possible values are listed in the following table. For example, if the region is Oregon, set the value to `"us-west-2"` for AWS and `"us-west2"` for GCP.
            | Cloud provider | Region name              | Region          |
            |----------------|--------------------------|-----------------|
            | AWS            | US East (N. Virginia)    | us-east-1       |
            | AWS            | US West (Oregon)         | us-west-2       |
            | AWS            | Asia Pacific (Tokyo)     | ap-northeast-1  |
            | AWS            | Asia Pacific (Seoul)     | ap-northeast-2  |
            | AWS            | Asia Pacific (Singapore) | ap-southeast-1  |
            | AWS            | Asia Pacific (Mumbai)    | ap-south-1      |
            | AWS            | Europe (Frankfurt)       | eu-central-1    |
            | GCP            | Iowa                     | us-central1     |
            | GCP            | Oregon                   | us-west1        |
            | GCP            | Tokyo                    | asia-northeast1 |
            | GCP            | Singapore                | asia-southeast1 |
            | GCP            | Taiwan                   | asia-east1      |
          example: us-west-2
    openapiUpdateClusterNodeSpec:
      required:
      - node_quantity
      - node_type
      type: object
      properties:
        node_type:
          type: string
          description: |-
            The type of a node in the cluster.

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), you must specify a configuration for each of `"TIDB"`, `"TIKV"`, and `"TIFLASH"`.
            - If the cluster type is `"DEDICATED"`, you must specify a configuration for each of `"TIDB"` and `"TIKV"`, while `"TIFLASH"` is optional.
          example: TIKV
          enum:
          - TIDB
          - TIKV
          - TIFLASH
        node_size:
          type: string
          description: |-
            The size of the `node_type` in the cluster. You can get the available node size of each region from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            If you want to add TiFlash nodes to a cluster that does not have one before (increase the `node_quantity` of `"TIFLASH"` from 0), you must specify the `node_size` of TiFlash nodes. In other cases, you cannot modify the `node_size` of the node.

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), node_size (Shared0) of TiDB, node_size (Shared0) of TiKV, and node_size (Shared0) of TiFlash must be present at the same time.
            - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV must be present at the same time.
            - node_size (4C32G) of TiDB and node_size (4C32G) of TiKV do not support TiFlash.

            **Limitations**:
            - Can not modify `node_size` of an existing cluster.
        storage_size_gib:
          type: integer
          description: |-
            The storage size of a node in the cluster. You can get the minimum and maximum of storage size from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            If you want to add TiFlash nodes to a cluster that does not have one before (increase the `node_quantity` of `"TIFLASH"` from 0), you must specify the `storage_size_gib` of TiFlash nodes. In other cases, you cannot modify the `storage_size_gib` of the node.

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), `storage_size_gib` of TiKV and `storage_size_gib` of TiFlash must all be `1`.
            - For TiDB nodes, the `storage_size_gib` value is ignored. Setting this configuration does not have any effects.

            **Limitations**:
            - Can not modify `storage_size_gib` of an existing cluster.
          format: int32
        node_quantity:
          type: integer
          description: |-
            The number of nodes in the cluster. You can get the minimum and step of a node quantity from the response of [List the cloud providers, regions and available specifications](#tag/Cluster/operation/ListProviderRegions).

            **Additional combination rules**:
            - If the cluster type is `"SHARED"` (Developer Tier), `node_quantity` of TiKV and `node_quantity` of TiFlash must all be `1`.

            **Limitations**:
            - TiKV and TiFlash do not support decreasing node quantity.
            - The `node_quantity` of TiKV must be a multiple of 3.
          format: int32
          example: 6
    protobufAny:
      type: object
      properties:
        '@type':
          type: string
      additionalProperties:
        type: object
    rpcStatus:
      type: object
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
        details:
          type: array
          items:
            type: object
            additionalProperties:
              type: object
